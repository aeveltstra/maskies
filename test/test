#!/bin/bash
# Runs known wire tests. For each test,
# its name and result (SUCCESS or FAILURE)
# gets output.
# @author A.E.Veltstra
# @since 2.20.902.0240
# @version 2.20.912.1501
# This script assumes the following:
# 1. It lives in a child folder underneath
#    the one in which the game Maskies lives.
# 2. It has sibling files named "wire-1.txt"
#    and "name-1.txt" etc.
# 3. It has a sibling program named 
#    MaskiesWireTest that checks the output
#    generated by Maskies based on a wire.
# 4. MaskiesWireTest knows each wire by name
#    and the output each expects.

list=wire-*.txt
for wirefile in $list; do
    wire=$(basename -as .txt "$wirefile")
    echo Testing $wire:
    cat "$wirefile" | ../Maskies | tail -7 | ./MaskiesWireTest "$wire"
done

list=name-*.txt
for namefile in $list; do
    name=$(basename -as .txt "$namefile")
    echo Testing $name:
    cat "$namefile" | ../Maskies | tail -6 | ./MaskiesWireTest "$name"
done
